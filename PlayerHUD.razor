@using System
@using Sandbox
@using Sandbox.UI
@inherits PanelComponent

<root class="playerhud">
    <div class="logo">
        <img src="/ui/logo.png" alt="DubzRP Logo" />
    </div>

    <div class="bottom-left" style="display: flex; flex-direction: column-reverse; gap: 4px;">
        <!-- Armor Bar -->
        <div class="healthbar armor">
            <div class="fill" style="width:@((Player?.MaxArmor > 0 ? (Player?.Armor ?? 0) / Player.MaxArmor * 100f : 0))%"></div>
            <p>@System.Math.Clamp((int)(Player?.Armor ?? 0), 0, (int)(Player?.MaxArmor ?? 100))%</p>
        </div>

        <!-- Health Bar -->
        <div class="healthbar health">
            <div class="fill" style="width:@((Player?.MaxHealth > 0 ? (Player?.Health ?? 0) / Player.MaxHealth * 100f : 0))%"></div>
            <p>@System.Math.Clamp((int)(Player?.Health ?? 0), 0, (int)(Player?.MaxHealth ?? 100))%</p>
        </div>

        <!-- Vitals -->
        <div class="vitals">
            <p class="salary">Salary: $@(Player?.Salary.ToString("N0") ?? "0")</p>
            <p class="job">Job: @(Player?.Job ?? "Unemployed")</p>
            <p class="wallet">Wallet: $@(Player?.Wallet.ToString("N0") ?? "0")</p>
        </div>
    </div>
</root>

@code
{
    [Property] public DubzPlayer? Player { get; set; }

    protected override int BuildHash() 
    {
        return System.HashCode.Combine(
            Player?.Wallet ?? 0,
            (int)(Player?.Health ?? 0),
            (int)(Player?.Armor ?? 0),
            Player?.Job ?? string.Empty,
            Player?.Salary ?? 0
        );
    }
}
